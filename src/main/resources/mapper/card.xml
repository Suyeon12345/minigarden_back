<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mybatis.mapper.CardMapper">
  <!-- 홀수/짝수 번호 무작위 한 개 추출 -->
  <select id="getCard" resultType="java.util.Map">
    SELECT content
    FROM card
    <where>
      <choose>
        <when test="odd">
          mod(num, 2) != 0
        </when>
        <when test="even">
          mod(num, 2) = 0
        </when>
        <otherwise>
          <!-- 홀짝이 정해지지 않은 경우 디폴트 -->
          1=1
        </otherwise>
      </choose>
    </where>
    ORDER BY DBMS_RANDOM.value
    FETCH FIRST 1 ROW ONLY;
  </select>

</mapper>