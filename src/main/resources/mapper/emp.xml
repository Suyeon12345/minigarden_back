<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mybatis.mapper.EmpMapper">
    <select id="empList" parameterType="map" resultType="map">
        select e_code, e_name, e_gender, e_phone from emp240118
        <where>
            <if test="e_code!=null">And e_code=#{e_code}</if>
            <if test="gubun!=null">
                <choose>
                    <when test='gubun.equals("e_name")'>
                        And e_name LIKE '%'||#{keyword}||'%'
                    </when>
                    <when test='gubun.equals("empcode")'>
                        And e_code LIKE '%'||#{keyword}||'%'
                    </when>
                    <when test='gubun.equals("emppnumber")'>
                        And e_phone LIKE '%'||#{keyword}||'%'
                    </when>
                </choose>
            </if>
        </where>
        order by e_code desc
    </select>
    <update id="empUpdate" parameterType="map">
        update emp240118
            set e_name = #{e_name}
              , e_gender = #{e_gender}
              , e_phone = #{e_phone}
        where e_code = #{e_code}
    </update>
    <delete id="empDelete" parameterType="int">
        delete from emp240118 where e_code = #{value}
    </delete>
</mapper>